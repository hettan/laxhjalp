{% macro add_field(fields) -%}
{% for key, value in fields.iteritems() %}
{% if value is mapping %}
<div class="row"> 
  {% set type = value["type"] %}
  <div class="form-group">
    <label style="width:100px;"><h3>{{key}}</h3></label>
    <div class="input-group">
      {% if type == "text" %}
      <textarea class="form-control" rows="4" name="{{key}}" style="width:500px;"> {{value["value"]}}</textarea>
      {% elif type in ["small-text", "image"] %}
      <input class="form-control" type="text" name="{{key}}" style="width:200px;" value='{{value["value"]}}' />
      {% endif %}
      <button class="btn btn-primary" style="position:absolute;bottom:0;" >Spara</button>
    </div>
  </div>
</div>
{% else %}
{% for i in range(value|length) %}
<h2>{{key}}: {{i}}</h3><br>
<form role="form" class="form-inline">
  {{ add_field(value[i]) }}
</form>
{% endfor %}
{% endif %}
{% endfor %}
{%- endmacro %}

{% set nav =  "change_text" %}
{% extends "body_wrapper.html" %}
{% block body %}
<div class="container">
  <div class="row">
  </div>
  <div class="row" style="height:100px;">
  </div>
  <div class="row featurette">
    <div class="col-md-12">
      <h1>Ã„ndra {{args['page']['name']}}</h1>
      {{ add_field(args['page']['fields']) }}
      <button type="submit" class="btn btn-lg btn-primary pull-right">Spara</button>
    </div>
  </div>
</div>
{% endblock %}
